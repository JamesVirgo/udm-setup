# model-definition.yml

kind: Model
apiVersion: v1alpha4

metadata:
  displayName: UDM Setup
  name: udm-setup
  summary: Allows for data preparation for inputs into the full UDM model.
  description: >
    The model allow for vector data to be rasterized to a common fishnet/grid as required for inputs into the UDM (Urban
    Development model). Data to be rasterized can be supplied as vector files (.geojson, .gpkg) and using the same input
    grid, supplied in a similar vector format (.geojson, .gpkg), will each be output as rasters (as .tif).

    Further updates will add additional features including using data from NISMOD-DB API to generate a fishnet to be used
    and also for the input vector data to be rasterized.
  type: data-processing

spec:
  inputs:
    env:
      - name: INITIAL_POPULATION
        title: Initial population
        desc: The initial population in the area
        type: integer
        default: 0
        min: 0
      - name: NEW_DWELLINGS
        title: New dwellings
        desc: The number of new dwellings to place in the area
        type: integer
        default: 100000
        min: 0
    dataslots:
      - name: attractor definition(s)
        description: >
          A .csv file which defines the attractor layers and their weight
        path: inputs/attractor_csv
        required: false
      - name: constraint definition(s)
        description: >
          A .csv file which defines the constraint layers and their weight
        path: inputs/constraint_csv
        required: false
      - name: datasets
        description: >
          A set of files including all data layers (constraints, attractors and parameter files) required for running the UDM model.
        default:
          - uid: 0a523a56-46d4-4b10-b86c-3110f29a155d
            versionUid: 6f2a9953-39d2-45aa-98f9-0d8973cc8ea2
        path: inputs/data_files
        required: false
      - name: new settlement locations
        description: >
          A .csv file which defines the locations of new settlements
        path: inputs/settlement_csv
        required: false
      - name: Fishnet
        description: >
          A grid/fishnet vector format file (.geojson, .gpkg)
        default:
          - uid: d37c7218-4f3d-44eb-8a4c-8ad08bbe5d20
            versionUid: 9aab4978-a60a-41bc-a36e-f8752f989d59
        path: inputs/fishnet
        required: false


  outputs:
    datasets:
      - name: UDM model run fileset
        desc: Set of files required for running the UDM model
